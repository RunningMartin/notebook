# Python核心技术与实战笔记

## 前言

- 如何快速学习一门语言？
  - 学好一门语言
    - 多加练习
    - 代码规范
    - 实战开发
  - 对比学习新语言，寻找其相同点和区别
  - 针对不同需求选择不同的语言

## 基础

### 列表和元组

- 定义：列表和元组都是一个可以放置任意数据类型的有序集合。

- 基本使用

  ```python
  # 创建
  my_list=[1, 2,'i`m list'] # 可以通过list()或[]创建一个空列表
  my_tuple=(1,2,'i`m tuple')  # 针对只有一个元素的元组需要添加逗号(1,)
  # 访问,通过索引访问元素，索引从0开始
  my_list[0]
  my_tuple[0]
  # 索引也支持负数，表示倒数
  my_list[-1]
  my_tuple[-1]
  ```

- 切片操作：返回一个子列表或子元组

  ```python
  # 格式 my_list[start_index:end_index:step]
  # start_index为起始索引 end_index为结束索引+1 step为间隔,默认为1
  my_list=[0,1,2,3,4,5,6,7,8,9]
  # 从头到尾，每两个元素取第一个值生成新的列表
  my_list[::2]
  ```

- 区别

  ```python
  # 列表是动态的，可以随意添加、删除、修改元素
  my_list[0]=5
  # 元组是静态的，无法做出修改,如果对元组执行修改，意味着必须新建一个元组
  my_tuple[0]=5
  # 列表所占空间比元组大，因为列表要维护动态变化，因此存储的元组的指针，64位操作系统，一个指针8个字节
  [].__sizeof__() # 40
  [1].__sizeof__() # 48
  (1,).__sizeof__() # 32
  ```

- 性能区别

  ```python
  # 元组占用的空间比列表少，因此性能较优秀
  # python中为了避免反复分配内存，会将一些不使用但占空间不大的静态变量缓存
  # 下次直接分配这些缓存的空间
  python3 -m timeit `(1,2,3,4,5,6)`
  python3 -m timeit `[1,2,3,4,5,6]` # 差距差不多在5倍
  # 如果使用jupyter 可以使用
  # %timeit (1,2,3,4,5,6)
  # %timeit [1,2,3,4,5,6]
  ```

- 使用场景

  - 元组用于数据和数量不变的情况。
  - 列表用于数据可以变化的情况。

- 思考：`empty_list=list()`和`empty_list=[]`哪种方法的速度更快呢？

  `[]`比`list()`更快，因为调用`list()`函数会有一部分函数调用的开销，而`[]`可以避免掉这部分开销。

### 字典和集合

字典是由一系列键和值配对组成的元素的集合，在Python 3.7+，字典是有序的，在之前的版本，字典是无序的。字典是一个可变，其相比元组和列表，在查找、删除、添加元素操作能在常数时间复杂度内完成。

集合和字典类似，唯一的区别是集合没有键和值的配对，有一系列无序的、唯一的元素组成。

- 创建

  ```python
  # 字典
  my_dict={'name':'martin','age':24}
  my_dict=dict(name='martin','age'=24)
  my_dict=dict([('name','martin'),('age',24)])
  # 集合
  my_set={1,2,3}
  my_set=set([1,2,3])
  ```

- 访问

  ```python
  # 字典访问，采用索引值
  my_dict['name']
  # 如果索引值name不存在，则返回None，避免直接通过索引值方法，带来异常KeyError
  my_dict.get('name',default=None)
  # 集合只能用in来判断元素是否在集合中
  ```

- 字典和集合性能：字典在查找、添加、删除时能做到O(1)的时间复杂度。通过大量的数据进行验证。

- 工作原理

  - 老版本：`hash key value`，会有1/3的空闲空间，避免频繁的hash冲突。也带来了空间的上的浪费。
  - 新版本：Indices中存储元素在Entries中的索引`hash key value`。
  - 哈希冲突采用线性探测。

### 字符串

- 什么是字符串？

  字符串是由独立的字符组成的一个序列，通常包含在`'字符串内容'`、`"字符串内容"`、`"""字符串内容"""`或`'''字符串内容'''`。支持单引号和双引号字符串的目的是为了解决字符串内部存在单引号或双引号，导致配对出错：`"I'm a boy!"`。而三引号字符串主要用于多行字符串。当然字符串中还有一类为转义字符，具有特殊含义：

  `\\`、`\n`、`\t`横向制表，`\‘`

- 常用操作

  ```python
  # 索引
  name='martin'
  name[0]
  # 切片
  name[1:4]
  # 遍历
  for char in name:
      print(char)
  # 字符串是不可变对象
  name[0]='M' # 报错
  # 如果想修改字符串，只能新建字符串
  name.replcae('m','M')
  ```

- 字符串的格式化`string.format`和f字符串

### 输入输出

- 简单输入输出：input、print。Python中float存在精度控制。

- 文件交互

  ```python
  with open(文件名,模式) as file:
  	file.read() # 全部获取
      file.write()
  # 模式：r w a b +
  ```

- 序列化

  ```python
  json.dumps()
  json.loads()
  json.dump()# 操控文件
  json.load()
  ```

- Protocol Buffer：转换为二进制

### 条件与循环

- 条件语句

  ```
  if 条件1:
  	操作1
  elif 条件2:
  	操作2
  else:
  	操作3
  ```

- 布尔量：鼓励显式条件判断。

- 循环语句：

  ```python
  for :# 只能用于可迭代对象
  	操作
  while 条件:
      操作
  ```

- 退出：continue、break

- 介绍enumerate

- [if .. else ... for] 和[for ... if ..]

