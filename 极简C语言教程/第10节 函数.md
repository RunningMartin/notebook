# 极简C语言教程 第10节 函数

前面我们已经使用了`printf`函数，这一节，我们就学习如何去创建一个函数，来让别人进行调用。

在调用`printf`函数时，已经为我们展现了创建函数的两大特点：

- 代码复用。
- 封装复杂度，若需要将`printf`输出的位置修改，我们只需要去修改`printf`函数的代码即可。

## 定义

在调用函数前必须对函数进行定义与声明，函数的定义规则为：

```c
返回值类型 函数名(参数声明){
    函数体
}
```

如果没有返回值，使用`void`作为函数的返回值类型；如果有返回值，则需要使用`return`语句返回相应类型的数据。

```c
#include <stdio.h>

int sum(int a,int b){
	return a+b;
}

int main(void) {
    printf("%d",sum(1,2));
}
```

`sum`函数定义中，标识符`a`和`b`是形式参数；调用时，向函数传入实际的参数，这是标识符`a`和`b`指向的对象将进行初始化。

在定义函数时，有一点需要注意：函数不能返回数组。

- 如果函数的形参要求为数组，可以将形参声明为类似`int arr[]`形式，但是函数获取不到数组的长度，只能显示传入，具体原因请看数组和指针两节内容。
- 传入多维数组时，形参只能省略第一维度的长度。
- 返回值：`return 表达式;`
- 结束函数
  - `return`可以通过返回值来结束函数。
  - `stdlib.h`提供的`exit(数字);`，可以通过数字来表明结束的原因。

## 声明

在调用`printf`函数进行输出时，我们并没有在程序中，定义一个`printf`函数，而是通过`#include<stdio.h>`导入了`printf`函数的函数声明，这样我们就能将函数的定义与调用相隔离。

函数声明的格式为：`返回类型 函数名(形参)`。

```c
#include <stdio.h>
int sum(int a,int b);

int main(void) {
    printf("%d",sum(1,2));
}

int sum(int a,int b){
    return a+b;
}
```

函数声明还有一个作用：编译器能通过函数声明了解到函数的返回值类型，调用时需要传递多少个参数，每个参数的类型，因此也将函数声明称之为**函数原型**。

## 调用

调用函数时，需要传递给函数相应的参数，这些参数被称之为实参。

由于函数调用时，需要频繁的分配、释放空间，因此函数调用是在一块动态分配内存区域处理的，我们常称之为栈内存(其调用过程类似于栈，由于先调用的函数依赖与后进入的函数的结果，因此后调用的函数，反而需要先处理)。

调用函数时，会根据函数原型在动态分配区域分配合适的空间，然后将实参的值直接拷贝到分配的空间中(值传递)，因此在函数中对其修改是不会影响到实参的值。

## 总结

- 可以通过`return`和`exit`语句结束函数。
- 函数原型具备隔离定义与调用、传参检查的功能。
- 函数在调用时都是值传递。

---

![微信号](图片/微信号.png)
