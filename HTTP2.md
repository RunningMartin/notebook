# HTTP/2

## 特性概览

HTTP主要有两个缺点：

- 安全性问题：通过SSL/TLS解决。
- 性能问题：只能优化握手加密环境。

HTTP/2将HTTP分解为语义和语法部分，语义和HTTP完全相同，因此基于HTTP的上次应用也不需要修改。HTTP/2没有引入新的协议名，仍然用http表示明文协议，https表示加密协议，因此具体使用哪个协议，有客户端或服务器端决定。

HTTP/2的核心是通过对语法部分进行修改，提升性能。首先，HTTP/2采用HPACK算法对报文头部进行了压缩(客户端和服务器端建立字典，用索引表示重复字符串，对数字和字符串采用哈夫曼编码压缩)。

其次，HTTP/2的报文采用二进制形式，体积小，处理速度快，将原本的HEADER+Body打散为多个二进制帧：HEADERS帧存放头数据，DATA帧存放实体数据，因此对于大文件只有一个HEADERS帧+多个DATA帧(碎片化)。

HTTP/2还利用可以在一个TCP连接上用流同时发送多个碎片化信息的功能，定义了一个流(二进制帧双向传输序列)，实现多路复用。多个请求、响应之间没有了顺序关系，不需要排队等待，不会出现队头阻塞问题，降低了延迟，大幅度提高了连接的利用率。HTTP还在一定程度上改变了请求-应答模式，服务器能建立流主动往客户端发送消息。

HTTP/2的协议栈在TLS层上加了HPack和Stream层。

